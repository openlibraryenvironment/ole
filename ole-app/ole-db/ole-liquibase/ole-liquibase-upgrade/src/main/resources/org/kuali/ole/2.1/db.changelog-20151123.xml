<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet context="bootstrap" author="ole" id="OLE_LOAD_KRCR_PARM_T_oracle" dbms="oracle">
        <loadData tableName="KRCR_PARM_T" file="org/kuali/ole/2.1/data/krcr_parm_t.csv"/>
        <rollback>
            <delete tableName="KRCR_PARM_T">
                <where>APPL_ID = 'OLE'</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_LOAD_KRCR_PARM_T_mysql" dbms="mysql">
        <sql>
            SET sql_mode='NO_BACKSLASH_ESCAPES'
        </sql>
        <loadData tableName="KRCR_PARM_T" file="org/kuali/ole/2.1/data/krcr_parm_t.csv"/>
        <rollback>
            <delete tableName="KRCR_PARM_T">
                <where>APPL_NMSPC_CD = 'OLE'</where>
            </delete>
        </rollback>
    </changeSet>
    <changeSet context="bootstrap" author="ole" id="OLE_KRCR_PARM_T">
        <update tableName="KRCR_PARM_T">
            <column name="VAL" value="PO + 0 $" />
            <where>PARM_NM = 'REENCUMBER_RECURRING_ORDERS'</where>
        </update>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_DS_ITEM_T_ADD">
        <addColumn
                tableName="OLE_DS_ITEM_T">
            <column name="DESC_OF_PIECES"   type="VARCHAR(400)"/>
        </addColumn>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="ITEM_AUDIT_T">
        <createTable tableName="ITEM_AUDIT_T">
            <column name="AUDIT_ID"   type="INTEGER(10)">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="FOREIGN_KEY_REF"   type="INTEGER(40)"/>
            <column name="ACTOR"   type="VARCHAR(40)"/>
            <column name="UPDATE_DATE"   type="TIMESTAMP"/>
            <column name="COLUMN_UPDATED"   type="VARCHAR(40)"/>
            <column name="COLUMN_VALUE"   type="BLOB"/>
            <column name="OBJ_ID"  type="VARCHAR(36)"/>
            <column name="VER_NBR" type="DECIMAL(8)"/>
        </createTable>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="ITEM_AUDIT_S" dbms="oracle">
        <createSequence
                incrementBy="1"
                ordered="true"
                sequenceName="ITEM_AUDIT_S"
                startValue="1"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="ITEM_AUDIT_S" dbms="mysql">
        <createTable tableName="ITEM_AUDIT_S">
            <column name="ID"   type="BIGINT(19)">
                <constraints nullable="false" primaryKey="true" />
            </column>
        </createTable>

        <addAutoIncrement
                columnDataType="BIGINT(19)"
                columnName="ID"
                incrementBy="1"
                startWith="1"
                tableName="ITEM_AUDIT_S"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="BIB_AUDIT_T">
        <createTable tableName="BIB_AUDIT_T">
            <column name="AUDIT_ID"   type="INTEGER(10)">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="FOREIGN_KEY_REF"   type="INTEGER(40)"/>
            <column name="ACTOR"   type="VARCHAR(40)"/>
            <column name="UPDATE_DATE"   type="TIMESTAMP"/>
            <column name="COLUMN_UPDATED"   type="VARCHAR(40)"/>
            <column name="COLUMN_VALUE"   type="BLOB"/>
            <column name="OBJ_ID"  type="VARCHAR(36)"/>
            <column name="VER_NBR" type="DECIMAL(8)"/>
        </createTable>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="BIB_AUDIT_S" dbms="oracle">
        <createSequence
                incrementBy="1"
                ordered="true"
                sequenceName="BIB_AUDIT_S"
                startValue="1"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="BIB_AUDIT_S" dbms="mysql">
        <createTable tableName="BIB_AUDIT_S">
            <column name="ID"   type="BIGINT(19)">
                <constraints nullable="false" primaryKey="true" />
            </column>
        </createTable>

        <addAutoIncrement
                columnDataType="BIGINT(19)"
                columnName="ID"
                incrementBy="1"
                startWith="1"
                tableName="BIB_AUDIT_S"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="HOLDINGS_AUDIT_T">
        <createTable tableName="HOLDINGS_AUDIT_T">
            <column name="AUDIT_ID"   type="INTEGER(10)">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="FOREIGN_KEY_REF"   type="INTEGER(40)"/>
            <column name="ACTOR"   type="VARCHAR(40)"/>
            <column name="UPDATE_DATE"   type="TIMESTAMP"/>
            <column name="COLUMN_UPDATED"   type="VARCHAR(40)"/>
            <column name="COLUMN_VALUE"   type="BLOB"/>
            <column name="OBJ_ID"  type="VARCHAR(36)"/>
            <column name="VER_NBR" type="DECIMAL(8)"/>
        </createTable>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="HOLDINGS_AUDIT_S" dbms="oracle">
        <createSequence
                incrementBy="1"
                ordered="true"
                sequenceName="HOLDINGS_AUDIT_S"
                startValue="1"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="HOLDINGS_AUDIT_S" dbms="mysql">
        <createTable tableName="HOLDINGS_AUDIT_S">
            <column name="ID"   type="BIGINT(19)">
                <constraints nullable="false" primaryKey="true" />
            </column>
        </createTable>

        <addAutoIncrement
                columnDataType="BIGINT(19)"
                columnName="ID"
                incrementBy="1"
                startWith="1"
                tableName="HOLDINGS_AUDIT_S"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_BAT_PRCS_PRFLE_CNST_T_ATT_VAL_MYSQL" dbms="mysql">
        <sql>ALTER TABLE OLE_BAT_PRCS_PRFLE_CNST_T MODIFY ATT_VAL varchar(500)</sql>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_BAT_PRCS_PRFLE_CNST_T_ATT_VAL_ORACLE" dbms="oracle">
        <sql>ALTER TABLE OLE_BAT_PRCS_PRFLE_CNST_T MODIFY ATT_VAL varchar2(500)</sql>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_DS_HOLDINGS_T_ADD_CANCELLATION_CANDIDATE">
        <addColumn
                tableName="OLE_DS_HOLDINGS_T">
            <column name="CANCELLATION_CANDIDATE" type="CHAR(1)"/>
        </addColumn>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="RQST_NOTE_ADD">
        <addColumn tableName="OLE_DLVR_RQST_T">
            <column name="RQST_NOTE"   type="VARCHAR(4000)"/>
        </addColumn>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_RETURN_HISTORY_T">
        <renameTable newTableName="OLE_RETURN_HISTORY_T"
                     oldTableName="OLE_LOAN_INTRANSIT_HISTORY_T"/>

        <addColumn tableName="OLE_RETURN_HISTORY_T">
            <column name="RETURNED_ITEM_STATUS"   type="VARCHAR(200)"/>
        </addColumn>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_RETURN_HISTORY_S_MYSQL" dbms="mysql">
        <renameTable newTableName="OLE_RETURN_HISTORY_S"
                     oldTableName="OLE_LOAN_INTRANSIT_HISTORY_S"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_RETURN_HISTORY_S_ORACLE" dbms="oracle">
        <sql>RENAME OLE_LOAN_INTRANSIT_HISTORY_S to OLE_RETURN_HISTORY_S</sql>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="ADD_RCP_ROLE_GROUP">
        <addColumn tableName="OLE_E_RES_REC_T">
            <column name="E_RES_RCP_ROLE_ID"   type="VARCHAR(40)"/>
        </addColumn>

        <addColumn tableName="OLE_E_RES_REC_T">
            <column name="E_RES_RCP_GROUP_ID"   type="VARCHAR(40)"/>
        </addColumn>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_PUR_RCVNG_LN_ITM_NTE_T">
        <addColumn
                tableName="OLE_PUR_RCVNG_LN_ITM_NTE_T">
            <column name="OLE_NTE_ACK"   type="VARCHAR(1)"/>
        </addColumn>
    </changeSet>

    <changeSet context="bootstrap" id="KRCR_PARM_T_UPDATE_PARAM_NAME" author="ole">
        <update tableName="KRCR_PARM_T">
            <column name="PARM_NM" value="EHOLDINGS_CALL_NUMBER_TYPE" />
            <where>NMSPC_CD ='OLE-DESC' and CMPNT_CD='Describe' and PARM_NM='E-HOLDINGS_CALL_NUMBER_TYPE' and APPL_ID='KUALI'</where>
        </update>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_DLVR_CIRC_RECORD_T1">
        <addColumn
                tableName="OLE_DLVR_CIRC_RECORD">
            <column name="ITEM_TYP_ID"   type="VARCHAR(100)"/>
            <column name="TEMP_ITEM_TYP_ID"   type="VARCHAR(100)"/>
        </addColumn>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_DLVR_RQST_T_ITEM_Q_INX_UK">
        <dropUniqueConstraint uniqueColumns="OLE_PTRN_ID,PTRN_Q_POS,ITM_ID"
                              constraintName="OLE_DLVR_RQST_T_ITEM_Q_INX_UK"
                              tableName="OLE_DLVR_RQST_T"/>

        <addUniqueConstraint columnNames="OLE_PTRN_ID,PTRN_Q_POS,ITEM_UUID"
                             constraintName="OLE_DLVR_RQST_T_ITEM_Q_INX_UK"
                             tableName="OLE_DLVR_RQST_T"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRF_T">
        <createTable tableName="OLE_NG_BAT_PRF_T">
            <column name="PRF_ID"   type="INTEGER(10)">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="PRF_NM"   type="VARCHAR(40)"/>
            <column name="PRF_TYP"   type="VARCHAR(40)"/>
            <column name="CONTENT"   type="BLOB"/>
            <column name="OBJ_ID"  type="VARCHAR(36)"/>
            <column name="VER_NBR" type="DECIMAL(8)"/>
        </createTable>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRF_S" dbms="oracle">
        <createSequence
                incrementBy="1"
                ordered="true"
                sequenceName="OLE_NG_BAT_PRF_S"
                startValue="1"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRF_S" dbms="mysql">
        <createTable tableName="OLE_NG_BAT_PRF_S">
            <column name="ID"   type="BIGINT(19)">
                <constraints nullable="false" primaryKey="true" />
            </column>
        </createTable>

        <addAutoIncrement
                columnDataType="BIGINT(19)"
                columnName="ID"
                incrementBy="1"
                startWith="1"
                tableName="OLE_NG_BAT_PRF_S"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRCS_T">
        <createTable tableName="OLE_NG_BAT_PRCS_T">
            <column name="PROCESS_ID"   type="INTEGER(10)">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="PROCESS_NAME"   type="VARCHAR(100)"/>
            <column name="PROCESS_TYPE"   type="VARCHAR(40)"/>
            <column name="PRF_ID"   type="INTEGER(10)"/>
            <column name="JOB_TYPE"   type="VARCHAR(40)"/>
            <column name="CRON_EXP"   type="VARCHAR(100)"/>
            <column name="CREATED_BY"   type="VARCHAR(40)"/>
            <column name="CREATED_ON"   type="TIMESTAMP"/>
            <column name="OBJ_ID"  type="VARCHAR(36)"/>
            <column name="VER_NBR" type="DECIMAL(8)"/>
        </createTable>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRCS_S" dbms="oracle">
        <createSequence
                incrementBy="1"
                ordered="true"
                sequenceName="OLE_NG_BAT_PRCS_S"
                startValue="1"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRCS_S" dbms="mysql">
        <createTable tableName="OLE_NG_BAT_PRCS_S">
            <column name="ID"   type="BIGINT(19)">
                <constraints nullable="false" primaryKey="true" />
            </column>
        </createTable>

        <addAutoIncrement
                columnDataType="BIGINT(19)"
                columnName="ID"
                incrementBy="1"
                startWith="1"
                tableName="OLE_NG_BAT_PRCS_S"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_JOB_T">
        <createTable tableName="OLE_NG_BAT_JOB_T">
            <column name="JOB_ID"   type="INTEGER(10)">
                <constraints nullable="false" primaryKey="true" />
            </column>
            <column name="JOB_NAME"   type="VARCHAR(100)"/>
            <column name="PROCESS_ID"   type="INTEGER(10)"/>
            <column name="PROCESS_TYPE"   type="VARCHAR(40)"/>
            <column name="PROFILE_NAME"   type="VARCHAR(100)"/>
            <column name="CREATED_BY"   type="VARCHAR(40)"/>
            <column name="START_TIME"   type="TIMESTAMP"/>
            <column name="END_TIME"   type="TIMESTAMP"/>
            <column name="PER_COMPLETED"   type="VARCHAR(40)"/>
            <column name="TIME_SPENT"   type="VARCHAR(40)"/>
            <column name="TOTAL_RECORDS"   type="VARCHAR(40)"/>
            <column name="TOTAL_RECORDS_PRCSD"   type="VARCHAR(40)"/>
            <column name="STATUS"   type="VARCHAR(40)"/>
            <column name="OBJ_ID"  type="VARCHAR(36)"/>
            <column name="VER_NBR" type="DECIMAL(8)"/>
        </createTable>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_JOB_S" dbms="oracle">
        <createSequence
                incrementBy="1"
                ordered="true"
                sequenceName="OLE_NG_BAT_JOB_S"
                startValue="1"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_JOB_S" dbms="mysql">
        <createTable tableName="OLE_NG_BAT_JOB_S">
            <column name="ID"   type="BIGINT(19)">
                <constraints nullable="false" primaryKey="true" />
            </column>
        </createTable>

        <addAutoIncrement
                columnDataType="BIGINT(19)"
                columnName="ID"
                incrementBy="1"
                startWith="1"
                tableName="OLE_NG_BAT_PRCS_S"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRF_ID_FK">
        <addForeignKeyConstraint baseTableCatalogName="ole"
                                 baseTableSchemaName="ole"
                                 baseColumnNames="PRF_ID"
                                 baseTableName="OLE_NG_BAT_PRCS_T"
                                 constraintName="OLE_NG_BAT_PRF_ID_FK"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="PRF_ID"
                                 referencedTableName="OLE_NG_BAT_PRF_T"/>
    </changeSet>

    <changeSet context="bootstrap" author="ole" id="OLE_NG_BAT_PRCS_ID_FK">
        <addForeignKeyConstraint baseTableCatalogName="ole"
                                 baseTableSchemaName="ole"
                                 baseColumnNames="PROCESS_ID"
                                 baseTableName="OLE_NG_BAT_JOB_T"
                                 constraintName="OLE_NG_BAT_PRCS_ID_FK"
                                 onDelete="CASCADE"
                                 onUpdate="RESTRICT"
                                 referencedColumnNames="PROCESS_ID"
                                 referencedTableName="OLE_NG_BAT_PRCS_T"/>
    </changeSet>



</databaseChangeLog>